{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home-design.css' %}">
{% endblock %}

{% block content %}
<div class="dashboard-title">
    <h3>Dashboard</h3>
</div>

<div class="dashboard-container">
    <!-- Members Card -->
    <div class="card members">
        <i class="fas fa-users"></i> <strong>Members</strong>
        <p class="display-4">{{ members_count }}</p>
        <div class="card-buttons">
            <a href="{% url 'eqrApp:member_list' %}">
                <i class="fa-solid fa-list-ul" style="color: #ffffff;"></i> View All
            </a>
            <a href="{% url 'eqrApp:add_member' %}">
                <i class="fa-solid fa-plus" style="color: #ffffff;"></i> Add New
            </a>
        </div>
    </div>

    <!-- Events Card -->
    <div class="card events">
        <i class="fas fa-calendar-alt"></i> <strong>Events</strong>
        <p class="display-4">{{ events_count }}</p>
        <div class="card-buttons">
            <a href="{% url 'eqrApp:event_list' %}">
                <i class="fa-solid fa-list-ul" style="color: #ffffff;"></i> View All
            </a>
            <a href="{% url 'eqrApp:create_event' %}">
                <i class="fa-solid fa-plus" style="color: #ffffff;"></i> Add New
            </a>
        </div>
    </div>

    <!-- Recent Activity -->
    <div class="card recent-activity">
        <i class="fas fa-history"></i><strong>Recent Activity</strong>
        <ul>
            {% for event in recent_events %}
            <li>
                <a href="{% url 'eqrApp:event_detail' event.pk %}">
                    <i class="fas fa-calendar-day"></i> {{ event.name }} - {{ event.date|date:"M d, Y" }}
                </a>
            </li>
            {% empty %}
            <li>No recent events</li>
            {% endfor %}
        </ul>
    </div>
</div>

<!-- Attendance Summary Section -->
<div class="dashboard-container">
    <div class="card" style="flex: 1 1 100%; max-width: 100%;">
        <label for="event-select"><i class="fa-solid fa-clipboard"></i> Attendance Summary</label>
        <select id="event-select">
            {% for event in recent_events %}
            <option>{{ event.name }}</option>
            {% endfor %}
        </select>

        <div class="status-cards">
            <div class="status present">
                Present
                <p>{{ present_count }}</p>
            </div>
            <div class="status absent">
                Absent
                <p>{{ absent_count }}</p>
            </div>
            <div class="status late">
                Late
                <p>{{ late_count }}</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

